import{_ as i,c as a,a as n,o as e}from"./app-gNybPUzB.js";const l="/assets/image-20240715135505062-D-tFqmoF.png",t={};function h(p,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="使用dockerfile制作基础镜像" tabindex="-1"><a class="header-anchor" href="#使用dockerfile制作基础镜像"><span>使用Dockerfile制作基础镜像</span></a></h1><blockquote><p>=== 这里基础镜像使用的时centos:7</p></blockquote><h2 id="_1-制作java17的dockerfile" tabindex="-1"><a class="header-anchor" href="#_1-制作java17的dockerfile"><span>1. 制作java17的Dockerfile</span></a></h2><h3 id="_1-1-dockerfile文件" tabindex="-1"><a class="header-anchor" href="#_1-1-dockerfile文件"><span>1.1 Dockerfile文件</span></a></h3><div class="language-dockerfile line-numbers-mode" data-ext="dockerfile" data-title="dockerfile"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>FROM centos:7</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 配置Java17环境变量</span></span>
<span class="line"><span>ADD jdk-17_linux-x64_bin.tar.gz /usr/lib/</span></span>
<span class="line"><span>ENV JAVA_HOME=/usr/lib/jdk-17.0.10</span></span>
<span class="line"><span>ENV CLASSPATH=.:\${JAVA_HOME}/jre/lib/rt.jar:\${JAVA_HOME}/lib/dt.jar:\${JAVA_HOME}/lib/tools.jar</span></span>
<span class="line"><span>ENV PATH=$PATH:\${JAVA_HOME}/bin</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CMD /bin/bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>jdk17 tar包要跟Dockerfile在同一个目录下，如果tar包使用绝对路径生成镜像的时候会报错</p></div><h3 id="_1-2-执行构建命令" tabindex="-1"><a class="header-anchor" href="#_1-2-执行构建命令"><span>1.2 执行构建命令</span></a></h3><blockquote><p>=== 安装包、Dockerfile文件、命令执行 都在同一个目录下</p></blockquote><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> build</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [镜像名] </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 例如</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> build</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> centos7_jdk17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-配置镜像" tabindex="-1"><a class="header-anchor" href="#_2-配置镜像"><span>2. 配置镜像</span></a></h2><blockquote><p>=== 进入镜像配置Java环境所必须的一些依赖</p></blockquote><h3 id="_2-1-配置yum" tabindex="-1"><a class="header-anchor" href="#_2-1-配置yum"><span>2.1 配置yum</span></a></h3><p>可看阿里云官方的设置方式</p><figure><img src="`+l+`" alt="image-20240715135505062" tabindex="0" loading="lazy"><figcaption>image-20240715135505062</figcaption></figure><h4 id="_2-1-1-备份自带的yum配置" tabindex="-1"><a class="header-anchor" href="#_2-1-1-备份自带的yum配置"><span>2.1.1 备份自带的yum配置</span></a></h4><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/yum.conf.d</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bak</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mv</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.repo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bak</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-1-2-设置新的yum源" tabindex="-1"><a class="header-anchor" href="#_2-1-2-设置新的yum源"><span>2.1.2 设置新的yum源</span></a></h4><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Centos-base.repo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>设置阿里基础镜像源</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># CentOS-Base.repo</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># The mirror system uses the connecting IP address of the client and the</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># update status of each mirror to pick mirrors that are updated to and</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># geographically close to the client.  You should use this for CentOS updates</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># unless you are manually picking other mirrors.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># If the mirrorlist= does not work for you, as a fall back you can try the </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># remarked out baseurl= line instead.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">base</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CentOS-8.5.2111</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Base</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">baseurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos-vault/8.5.2111/BaseOS/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$basearch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.aliyuncs.com/centos-vault/8.5.2111/BaseOS/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.cloud.aliyuncs.com/centos-vault/8.5.2111/BaseOS/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgcheck</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgkey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-Official</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#additional packages that may be useful</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">extras</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CentOS-8.5.2111</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Extras</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">baseurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos-vault/8.5.2111/extras/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$basearch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.aliyuncs.com/centos-vault/8.5.2111/extras/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.cloud.aliyuncs.com/centos-vault/8.5.2111/extras/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgcheck</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgkey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-Official</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#additional packages that extend functionality of existing packages</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">centosplus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CentOS-8.5.2111</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Plus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">baseurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos-vault/8.5.2111/centosplus/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$basearch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.aliyuncs.com/centos-vault/8.5.2111/centosplus/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.cloud.aliyuncs.com/centos-vault/8.5.2111/centosplus/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgcheck</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgkey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-Official</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">PowerTools</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CentOS-8.5.2111</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PowerTools</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">baseurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos-vault/8.5.2111/PowerTools/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$basearch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.aliyuncs.com/centos-vault/8.5.2111/PowerTools/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.cloud.aliyuncs.com/centos-vault/8.5.2111/PowerTools/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgcheck</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgkey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-Official</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">AppStream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CentOS-8.5.2111</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> AppStream</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">baseurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos-vault/8.5.2111/AppStream/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$basearch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.aliyuncs.com/centos-vault/8.5.2111/AppStream/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        http://mirrors.cloud.aliyuncs.com/centos-vault/8.5.2111/AppStream/$basearch/os/</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgcheck</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">gpgkey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-Official</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <strong>yum list</strong> 测试一下，如果包列表则是成功</p><h2 id="_3-配置java运行所需要的依赖" tabindex="-1"><a class="header-anchor" href="#_3-配置java运行所需要的依赖"><span>3. 配置Java运行所需要的依赖</span></a></h2><h3 id="_3-1-配置-libfreetype-so-6-库" tabindex="-1"><a class="header-anchor" href="#_3-1-配置-libfreetype-so-6-库"><span>3.1 配置 <strong>libfreetype.so.6</strong> 库</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p>libfreetype.so.6是一个在Linux系统中的动态链接库文件，它是由FreeType字体渲染引擎提供的</p><p>功能：</p><ol><li>字体文件支持</li><li>文字渲染</li></ol></div><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 对于Debain的系统，如ubuntu</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> libfreetype6</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 对于RHEL系统， 如centos, fedora</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> freetype</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">注</p><p>如果未安装则运行Java时报错如下：</p><p>Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: /usr/lib/jdk-17.0.10/lib/libfontmanager.so: libfreetype.so.6: cannot open shared object file: No such file or directory [in thread &quot;main&quot;]</p></div><h3 id="_3-2-配置-字体" tabindex="-1"><a class="header-anchor" href="#_3-2-配置-字体"><span>3.2 配置 字体</span></a></h3><blockquote><p>=== 如果缺少字体，对于访问验证码时会出现问题</p></blockquote><p>报错如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">jakarta.servlet.ServletException:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Handler</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dispatch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> failed:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> java.lang.InternalError:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> java.lang.reflect.InvocationTargetException</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.springframework.web.servlet.DispatcherServlet.doDispatch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DispatcherServlet.java:1096</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.springframework.web.servlet.DispatcherServlet.doService</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DispatcherServlet.java:974</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.springframework.web.servlet.FrameworkServlet.processRequest</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">FrameworkServlet.java:1011</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.springframework.web.servlet.FrameworkServlet.doGet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">FrameworkServlet.java:903</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jakarta.servlet.http.HttpServlet.service</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HttpServlet.java:564</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.springframework.web.servlet.FrameworkServlet.service</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">FrameworkServlet.java:885</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jakarta.servlet.http.HttpServlet.service</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HttpServlet.java:658</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ApplicationFilterChain.java:205</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.apache.catalina.core.ApplicationFilterChain.doFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ApplicationFilterChain.java:149</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.apache.tomcat.websocket.server.WsFilter.doFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">WsFilter.java:51</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ApplicationFilterChain.java:174</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.apache.catalina.core.ApplicationFilterChain.doFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ApplicationFilterChain.java:149</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.springframework.web.filter.OncePerRequestFilter.doFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">OncePerRequestFilter.java:110</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ApplicationFilterChain.java:174</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.apache.catalina.core.ApplicationFilterChain.doFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ApplicationFilterChain.java:149</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.springframework.security.web.FilterChainProxy.lambda</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$doFilterInternal$3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">FilterChainProxy.java:231</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.springframework.security.web.ObservationFilterChainDecorator</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$FilterObservation$SimpleFilterObservation</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.lambda</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$wrap$1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ObservationFilterChainDecorator.java:479</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	……</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解决方式</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fontconfig</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/fonts</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fc-cache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">重启应用(jar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)服务</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,32)]))}const r=i(t,[["render",h],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/notes/Docker/%E5%88%B6%E4%BD%9C%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/","title":"使用Dockerfile制作基础镜像","lang":"zh-CN","frontmatter":{"description":"使用Dockerfile制作基础镜像 === 这里基础镜像使用的时centos:7 1. 制作java17的Dockerfile 1.1 Dockerfile文件 注意 jdk17 tar包要跟Dockerfile在同一个目录下，如果tar包使用绝对路径生成镜像的时候会报错 1.2 执行构建命令 === 安装包、Dockerfile文件、命令执行 都在...","head":[["meta",{"property":"og:url","content":"https://kylinBachelor.github.io/notes/Docker/%E5%88%B6%E4%BD%9C%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F/"}],["meta",{"property":"og:site_name","content":"攻城狮"}],["meta",{"property":"og:title","content":"使用Dockerfile制作基础镜像"}],["meta",{"property":"og:description","content":"使用Dockerfile制作基础镜像 === 这里基础镜像使用的时centos:7 1. 制作java17的Dockerfile 1.1 Dockerfile文件 注意 jdk17 tar包要跟Dockerfile在同一个目录下，如果tar包使用绝对路径生成镜像的时候会报错 1.2 执行构建命令 === 安装包、Dockerfile文件、命令执行 都在..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-30T10:36:56.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-30T10:36:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"使用Dockerfile制作基础镜像\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-30T10:36:56.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":2.4,"words":721},"git":{"updatedTime":1732963016000},"autoDesc":true,"filePathRelative":"notes/Docker/制作基础镜像/index.md","categoryList":[{"id":"4358b5","sort":10004,"name":"notes"},{"id":"7acc78","sort":10005,"name":"Docker"},{"id":"9ad5b9","sort":10072,"name":"制作基础镜像"}],"bulletin":false}');export{r as comp,d as data};
