import{_ as i,c as a,a as n,o as e}from"./app-BQhiftj7.js";const l="/assets/image-20241012101124866-MosmqIg1.png",t="/assets/image-20241012103528908-1728700535391-2-DkXKgFyy.png",p="/assets/image-20241012103628927-D9Zn9BpG.png",h="/assets/image-20241012110731047-BHnvHSq_.png",d="/assets/image-20241012111552636-Cp-0A76w.png",r="/assets/image-20241012111620565-BkJJ87Kz.png",k="/assets/image-20241012112000741-jxHSe3Ym.png",c="/assets/image-20241012114257117-rd8HkA6A.png",o="/assets/image-20241012114401042-CW4gJTBn.png",A={};function D(g,s){return e(),a("div",null,s[0]||(s[0]=[n('<h2 id="_1-下载es" tabindex="-1"><a class="header-anchor" href="#_1-下载es"><span>1. 下载ES</span></a></h2><p>下载地址：https://www.elastic.co/cn/downloads/past-releases</p><p>相应的版本对应相应地址规则，例如：https://www.elastic.co/cn/downloads/past-releases/elasticsearch-7-8-0</p><p>如图：</p><figure><img src="'+l+`" alt="image-20241012101124866" tabindex="0" loading="lazy"><figcaption>image-20241012101124866</figcaption></figure><p>ES版本和jdk版本对应关系：https://www.elastic.co/cn/support/matrix#matrix_jvm</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>需要下载和Linux系统架构一致的ES安装包</p></div><h2 id="_2-解压tar包并放在安装的目录" tabindex="-1"><a class="header-anchor" href="#_2-解压tar包并放在安装的目录"><span>2. 解压tar包并放在安装的目录</span></a></h2><h2 id="_3-创建linux用户" tabindex="-1"><a class="header-anchor" href="#_3-创建linux用户"><span>3. 创建Linux用户</span></a></h2><p>在es中<code>超级管理员</code>用户是不允许操作es的，因此需要添加其他用户来操作es</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">useradd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> es</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #新增 es 用户</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">passwd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> es</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #为 es 用户设置密码</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">userdel</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> es</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #如果错了，可以删除再加</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chown</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> es:es</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /opt/module/es</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #文件夹所有者,即给es用户设置可操作的目录权限</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-jdk设置" tabindex="-1"><a class="header-anchor" href="#_4-jdk设置"><span>4. JDK设置</span></a></h2><p>ES的启动需要jdk环境，默认情况下，如果Linux系统中安装了Java环境，ES会直接去找系统的jdk。</p><p>ES自己也带有jdk，默认情况下，如果Linux系统中没有Java环境，ES会使用自己的jdk。</p><div class="hint-container note"><p class="hint-container-title">注</p><p>建议在启动ES时使用ES自己的jdk，因为ES版本和jdk版本是有关联的，正常情况下，Linux系统级的jdk版本是不可修改的，不能因为要使用ES就修改系统级的jdk版本。</p></div><h2 id="_5-设置es使用es自己的jdk" tabindex="-1"><a class="header-anchor" href="#_5-设置es使用es自己的jdk"><span>5. 设置ES使用ES自己的jdk</span></a></h2><p>个人尝试了三个ES版本：<code>8.15.1</code>,<code>8.15.2</code>,<code>7.17.18</code></p><h3 id="_5-1-8-x版本" tabindex="-1"><a class="header-anchor" href="#_5-1-8-x版本"><span>5.1 <code>8.x版本</code></span></a></h3><p>对应 <code>8.15.1</code>,<code>8.15.2</code> 版本或者说 <code>8.x</code>版本（8.x其他版本没试，只是猜测）的变化不大，设置方式如下：</p><p>进入到es安装包目录的<code>bin</code> 目录下找到<code>elasticsearch</code> 文件</p><figure><img src="`+t+'" alt="image-20241012103528908" tabindex="0" loading="lazy"><figcaption>image-20241012103528908</figcaption></figure><p>编辑文件 <code>vim elasticsearch</code>，设置ES自己的jdk环境，<code>一定要把设置放在最下边</code></p><figure><img src="'+p+`" alt="image-20241012103628927" tabindex="0" loading="lazy"><figcaption>image-20241012103628927</figcaption></figure><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># JAVA_HOME 目录需要改成自己的es的jdk目录</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> JAVA_HOME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">home</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">soft</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">elasticsearch-8</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">15</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jdk</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> PATH</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$JAVA_HOME</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">bin</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$PATH</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> CLASSPATH</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$JAVA_HOME</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lib</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dt</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$JAVA_HOME</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lib</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">tool</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-对于7-17-18-版本" tabindex="-1"><a class="header-anchor" href="#_5-2-对于7-17-18-版本"><span>5.2 对于<code>7.17.18</code> 版本</span></a></h3><p><code>7.17.18</code>版本的<code>elasticsearch</code>文件和<code>8.15.x</code>版本的<code>elasticsearch</code>文件差别很大，我也没做研究</p><p>我的环境是jdk17,没有修改jdk就可以，所以这里就不赘述了</p><h2 id="_6-设置参数配置" tabindex="-1"><a class="header-anchor" href="#_6-设置参数配置"><span>6. 设置参数配置</span></a></h2><h3 id="_6-1-设置es配置文件-elasticsearch-yml" tabindex="-1"><a class="header-anchor" href="#_6-1-设置es配置文件-elasticsearch-yml"><span>6.1 设置ES配置文件(elasticsearch.yml)</span></a></h3><p>位置：<code>ES包/config/elasticsearch.yml</code></p><p>内容如下：</p><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ======================== Elasticsearch Configuration =========================</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># NOTE: Elasticsearch comes with reasonable defaults for most settings.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       Before you set out to tweak and tune the configuration, make sure you</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       understand what are you trying to accomplish and the consequences.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># The primary way of configuring a node is via this file. This template lists</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># the most important settings you may want to configure for a production cluster.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Please consult the documentation for further information on configuration options:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ---------------------------------- Cluster -----------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Use a descriptive name for your cluster:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 集群名称</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cluster.name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ------------------------------------ Node ------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Use a descriptive name for the node:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点名</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">node.name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node-1</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Add custom attributes to the node:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#node.attr.rack: r1</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ----------------------------------- Paths ------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Path to directory where to store the data (separate multiple locations by comma):</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 数据存放位置</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">path.data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  /home/soft/elasticsearch-7.17.18/data</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Path to log files:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 日志存放位置</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">path.logs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/soft/elasticsearch-7.17.18/logs</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ----------------------------------- Memory -----------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Lock the memory on startup:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#bootstrap.memory_lock: true</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Make sure that the heap size is set to about half the memory available</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># on the system and that the owner of the process is allowed to use this</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># limit.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Elasticsearch performs poorly when the system is swapping the memory.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ---------------------------------- Network -----------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># By default Elasticsearch is only accessible on localhost. Set a different</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># address here to expose this node on the network:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置所有机器都可以访问</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">network.host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># By default Elasticsearch listens for HTTP traffic on the first free port it</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># finds starting at 9200. Set a specific HTTP port here:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置端口</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">http.port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 9200</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># For more information, consult the network module documentation.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># --------------------------------- Discovery ----------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Pass an initial list of hosts to perform discovery when this node is started:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#discovery.seed_hosts: [&quot;host1&quot;, &quot;host2&quot;]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Bootstrap the cluster using an initial set of master-eligible nodes:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cluster.initial_master_nodes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node-1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># For more information, consult the discovery and cluster formation module documentation.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ---------------------------------- Various -----------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Require explicit names when deleting indices:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#action.destructive_requires_name: true</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ---------------------------------- Security ----------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                                 *** WARNING ***</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Elasticsearch security features are not enabled by default.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># These features are free, but require configuration changes to enable them.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># This means that users don’t have to provide credentials and can get full access</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># to the cluster. Network connections are also not encrypted.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># To protect your data, we strongly encourage you to enable the Elasticsearch security features. </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Refer to the following documentation for instructions.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># https://www.elastic.co/guide/en/elasticsearch/reference/7.16/configuring-stack-security.html</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 开启es跨域</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">http.cors.enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">http.cors.allow-origin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">http.cors.allow-headers</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Authorization</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># # # 开启安全控制</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">xpack.security.enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">xpack.security.transport.ssl.enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-修改jvm启动参数" tabindex="-1"><a class="header-anchor" href="#_6-2-修改jvm启动参数"><span>6.2 修改jvm启动参数</span></a></h3><p>防止撑满内存</p><p>位置：<code>es包/config/jvm.options</code></p><figure><img src="`+h+`" alt="image-20241012110731047" tabindex="0" loading="lazy"><figcaption>image-20241012110731047</figcaption></figure><h3 id="_6-3-修改-etc-security-limits-conf" tabindex="-1"><a class="header-anchor" href="#_6-3-修改-etc-security-limits-conf"><span>6.3 修改/etc/security/limits.conf</span></a></h3><p>vim /etc/security/limits.conf</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在文件末尾中增加下面内容</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 每个进程可以打开的文件数的限制</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">es</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> soft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nofile</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65536</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">es</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hard</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nofile</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65536</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-修改-etc-security-limits-d-20-nproc-conf" tabindex="-1"><a class="header-anchor" href="#_6-4-修改-etc-security-limits-d-20-nproc-conf"><span>6.4 修改/etc/security/limits.d/20-nproc.conf</span></a></h3><p>vim /etc/security/limits.d/20-nproc.conf</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在文件末尾中增加下面内容</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 每个进程可以打开的文件数的限制</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">es</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> soft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nofile</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65536</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">es</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hard</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nofile</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65536</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 操作系统级别对每个用户创建的进程数的限制</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> hard nproc 4096</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 注： * 带表 Linux 所有用户名称</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-修改-etc-sysctl-conf" tabindex="-1"><a class="header-anchor" href="#_6-5-修改-etc-sysctl-conf"><span>6.5 修改/etc/sysctl.conf</span></a></h3><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在文件中增加下面内容</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 一个进程可以拥有的 VMA(虚拟内存区域)的数量,默认值为 65536</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vm.max_map_count</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=655360</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-重新加载或重启linux系统" tabindex="-1"><a class="header-anchor" href="#_6-6-重新加载或重启linux系统"><span>6.6 重新加载或重启Linux系统</span></a></h3><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sysctl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_7-启动" tabindex="-1"><a class="header-anchor" href="#_7-启动"><span>7. 启动</span></a></h2><p>进入：<code>es包/bin</code></p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 切换到上面添加的es用户</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">su</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> es</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 非后台启动，关闭命令行则es关闭,建议安装测试阶段使用该方式，也容易查看报错记录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./elasticsearch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 后台启动</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./elasticsearch</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-设置或修改-es密码" tabindex="-1"><a class="header-anchor" href="#_8-设置或修改-es密码"><span>8. 设置或修改 ES密码</span></a></h2><p>进入 <code>es包/bin</code></p><p>7.x版本和8.x版本有些不同，7.x版本没有设置密码只有重置密码</p><p>7.x</p><figure><img src="`+d+'" alt="image-20241012111552636" tabindex="0" loading="lazy"><figcaption>image-20241012111552636</figcaption></figure><p>8.x</p><figure><img src="'+r+`" alt="image-20241012111620565" tabindex="0" loading="lazy"><figcaption>image-20241012111620565</figcaption></figure><p>设置密码方式：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置密码</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> ./elasticsearch-setup-passwords</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> interactive</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重置密码</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> ./elasticsearch-reset-passwords</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> interactive</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-访问测试是否成功" tabindex="-1"><a class="header-anchor" href="#_9-访问测试是否成功"><span>9. 访问测试是否成功</span></a></h2><p>使用默认的9200（上面配置文件设置的端口）端口访问，如下则表示启动成功</p><figure><img src="`+k+'" alt="image-20241012112000741" tabindex="0" loading="lazy"><figcaption>image-20241012112000741</figcaption></figure><h2 id="_10-安装插件" tabindex="-1"><a class="header-anchor" href="#_10-安装插件"><span>10. 安装插件</span></a></h2><div class="hint-container warning"><p class="hint-container-title">注意</p><p>ES插件需要和ES版本号相对应</p></div><p>拼音插件地址：https://github.com/infinilabs/analysis-pinyin/releases 分词插件地址：https://github.com/infinilabs/analysis-ik/releases</p><p>下载这个zip</p><figure><img src="'+c+'" alt="image-20241012114257117" tabindex="0" loading="lazy"><figcaption>image-20241012114257117</figcaption></figure><p>然后解压放到 <code>es包/plugins</code>下，重启es即可</p><figure><img src="'+o+'" alt="image-20241012114401042" tabindex="0" loading="lazy"><figcaption>image-20241012114401042</figcaption></figure>',68)]))}const u=i(A,[["render",D],["__file","index.html.vue"]]),m=JSON.parse('{"path":"/notes/Elasticsearch/Centos%E4%B8%8B%E5%AE%89%E8%A3%85ES/","title":"Centos下安装Elasticsearch记录","lang":"zh-CN","frontmatter":{"title":"Centos下安装Elasticsearch记录","description":"1. 下载ES 下载地址：https://www.elastic.co/cn/downloads/past-releases 相应的版本对应相应地址规则，例如：https://www.elastic.co/cn/downloads/past-releases/elasticsearch-7-8-0 如图： image-20241012101124866...","head":[["meta",{"property":"og:url","content":"https://kylinBachelor.github.io/notes/Elasticsearch/Centos%E4%B8%8B%E5%AE%89%E8%A3%85ES/"}],["meta",{"property":"og:site_name","content":"攻城狮"}],["meta",{"property":"og:title","content":"Centos下安装Elasticsearch记录"}],["meta",{"property":"og:description","content":"1. 下载ES 下载地址：https://www.elastic.co/cn/downloads/past-releases 相应的版本对应相应地址规则，例如：https://www.elastic.co/cn/downloads/past-releases/elasticsearch-7-8-0 如图： image-20241012101124866..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-30T10:36:56.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-30T10:36:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Centos下安装Elasticsearch记录\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-30T10:36:56.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":4.69,"words":1407},"git":{"updatedTime":1732963016000},"autoDesc":true,"filePathRelative":"notes/Elasticsearch/Centos下安装ES/index.md","categoryList":[{"id":"4358b5","sort":10001,"name":"notes"},{"id":"2c3702","sort":10089,"name":"Elasticsearch"},{"id":"522fc8","sort":10091,"name":"Centos下安装ES"}],"bulletin":false}');export{u as comp,m as data};
